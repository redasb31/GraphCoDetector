




<h2>バブルソート(Bubble Sort)</h2>

<p>
バブルソートとは，列をソートするアルゴリズムの 1 つである．長さ <var>N</var> の数列 <var>A</var> を昇順にソートしたいとしよう．バブルソートは，隣り合う 2 つの数で大小関係が崩れているものがあれば，それらの位置を交換する．これを，数列を前から順に走査しながら行う．すなわち，<var>A<sub>i</sub></var> &gt; <var>A<sub>i+1</sub></var> となっている場所があれば，その 2 数を交換するということを，<var>i</var> = 1, 2, ... , <var>N</var> − 1 に対してこの順で行うのが 1 回の走査である．この走査を <var>N</var> − 1 回繰り返すことで，数列を昇順にソートできることが知られている．
</p>

<p>
数列 <var>A</var> のバブルソートによる交換回数とは，数列 <var>A</var> に上記のアルゴリズムを適用した時に，整数の交換が行われる回数である．（バブルソートとして知られるアルゴリズム及び実装には，ループの順番や範囲，及び終了条件など，細かな差異がある場合がある．ただし，同じ数列に適用した際の整数の交換回数はそれらの差異により変化しないことが知られている．）
</p>

<p>
例えば，以下のプログラムは長さ <span>n</span> の整数の配列 <span>a</span> をバブルソートによりソートする関数を C 言語で記述したものである．
</p>

<pre>
void bubble_sort(int *a, int n) {
  int i, j;
  for (i = 0; i < n - 1; ++i) {
    for (j = 0; j < n - 1; ++j) {
      if (a[j] > a[j + 1]) {
        /* 以下3 行が1 回の整数の交換に相当*/
        int x = a[j];
        a[j] = a[j + 1];
        a[j + 1] = x;
      }
    }
 }
}
</pre>


<h3>課題</h3>

<p>
長さ <var>N</var> の数列 <var>A</var> が与えられる．数列 <var>A</var> の任意の場所の 2 つの整数を 1 回だけ交換した数列 <var>A'</var> を作るとする．数列 <var>A'</var> のバブルソートによる交換回数の最小値を求めるプログラムを作成せよ．（最初に交換する2つの整数は必ずしも隣り合っている必要はないことに注意せよ．）
</p>

<h3>制限</h3>
<ul>
<li>1 &le; <var>N</var> &le; 100 000 &nbsp;&nbsp;&nbsp;&nbsp; 数列 <var>A</var> の長さ</li>
<li>1 &le; <var>A<sub>i</sub></var> &le; 1 000 000 000 &nbsp;&nbsp;&nbsp;&nbsp;数列 <var>A</var> に含まれる数字の大きさ</li>
</ul>

<h3>入力</h3>
<p>
標準入力から以下のデータを読み込め．
</p>
<ul>
<li> 1 行目には，整数 <var>N</var> が書かれている．<var>N</var> は数列 <var>A</var> の長さを表す．</li>
<li> 続く <var>N</var> 行のうちの <var>i</var> 行目(1 &le; <var>i</var> &le; <var>N</var>) には，整数 <var>A<sub>i</sub></var> が書かれている．これは数列 <var>A</var> の <var>i</var> 番目の整数を表す．</li>
</ul>

<h3>出力</h3>
<p>
標準出力に，数列 <var>A'</var> のバブルソートによる交換回数の最小値を表す整数を 1 行で出力せよ．
</p>

<h3>採点基準</h3>
<ul>
<li>採点用データのうち，配点の10%分については，<var>N</var> &le; 1 000 を満たし，任意の <var>i, j</var> (1 &le; <var>i</var> &lt; <var>j</var> &le; <var>N</var>) について <var>A<sub>i</sub></var> &ne; <var>A<sub>j</sub></var> を満たす．</li>
<li>採点用データのうち，配点の30%分については，<var>N</var> &le; 5 000 を満たし，任意の <var>i, j</var> (1 &le; <var>i</var> &lt; <var>j</var> &le; <var>N</var>) について <var>A<sub>i</sub></var> &ne; <var>A<sub>j</sub></var> を満たす．</li>
<li>採点用データのうち，配点の80%分については，任意の <var>i, j</var> (1 &le; <var>i</var> &lt; <var>j</var> &le; <var>N</var>) について <var>A<sub>i</sub></var> &ne; <var>A<sub>j</sub></var> を満たす．</li>
</ul>

<h3>
入出力例
</h3>


<h3>入力例 1</h3>
<pre>
5
10
3
6
8
1
</pre>

<h3> 出力例 1</h3>
<pre>
0
</pre>

<p>
数列 <var>A</var> の最初の 10 と最後の 1 を交換することにすると，数列 <var>A'</var> はソート済みの列となり，バブルソートの交換回数は 0 となる．
</p>
<br>


<h3>入力例 2</h3>
<pre>
5
3
1
7
9
5
</pre>

<h3>出力例 2</h3>
<pre>
2
</pre>

<p>
数列 <var>A</var> の 3 番目の 7 と最後の 5 を交換することで，数列 <var>A'</var> は 3,1,5,9,7 となる．<var>A'</var> のバブルソートによる交換回数は 2 である．
</p>
<br>


<h3>入力例 3</h3>
<pre>
3
1
2
3
</pre>

<h3>出力例 3</h3>
<pre>
1
</pre>
<p>
最初から数列 <var>A</var> がソートされている場合でも，数列 <var>A'</var> を作る際に交換を行わなければならない．
</p>




<div class="source">
<p class="source">
問題文と自動審判に使われるデータは、<a href="http://www.ioi-jp.org">情報オリンピック日本委員会</a>が作成し公開している問題文と採点用テストデータです。
</p>
</div>
